@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@1,400&display=swap');

/* ── Hush Design System ─────────────────────── */
/* Theme: default is dark. Light applied via prefers-color-scheme or [data-theme="light"]. */

:root {
  /* ── Core Surfaces (dark, warm sRGB 19,18,10 → 60,57,53) ── */
  --hush-black:        #13120a;  /* 19,18,10 — page bg */
  --hush-surface:      #1b1912;  /* 27,25,18 — cards */
  --hush-elevated:     #26241e;  /* 38,36,30 — raised */
  --hush-hover:        #3c3935;  /* 60,57,53 — hover */

  /* ── Signature Orange (Adobe RGB 213, 79, 18) ── */
  --hush-amber:        #d54f12;
  --hush-amber-bright: #e85a1a;
  --hush-amber-dim:    #a33d0e;
  --hush-amber-glow:   rgba(213, 79, 18, 0.15);
  --hush-amber-ghost:  rgba(213, 79, 18, 0.08);
  --hush-on-amber:     #13120a;

  /* ── Borders (warm dark) ── */
  --hush-border:       #26241e;
  --hush-border-hover: #3c3935;
  --hush-border-focus: #4a4742;

  /* ── Text Hierarchy (4 levels) ── */
  --hush-text:         #e4e4ec;
  --hush-text-secondary: #8888a0;
  --hush-text-muted:   #555568;
  --hush-text-ghost:   #3a3a4e;

  /* ── Status Colors (functional only) ── */
  --hush-live:         #34d399;
  --hush-live-glow:    rgba(52, 211, 153, 0.25);
  --hush-danger:       #ef4444;
  --hush-danger-ghost: rgba(239, 68, 68, 0.10);

  /* ── Theme-specific (glass, overlays) ── */
  --hush-glass-bg:         rgba(19, 18, 10, 0.68);
  --hush-video-label-bg:  rgba(19, 18, 10, 0.7);
  --hush-badge-live-bg:   rgba(52, 211, 153, 0.1);
  --hush-btn-danger-hover: rgba(239, 68, 68, 0.15);
  --hush-header-block-bg:    rgba(255, 255, 255, 0.03);
  --hush-header-block-border: rgba(255, 255, 255, 0.06);

  /* ── Typography ── */
  --font-sans:  'Sora', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-mono:  'JetBrains Mono', 'SF Mono', Consolas, monospace;

  /* ── Spacing & Radius ── */
  --radius-sm:   0;
  --radius-md:   0;
  --radius-lg:   0;
  --radius-xl:   0;
  --radius-full: 0;

  /* ── Motion (no spring/bounce; transitions only) ── */
  --ease-out:    cubic-bezier(0.16, 1, 0.3, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --duration-fast:   120ms;
  --duration-normal: 200ms;
  --duration-slow:   320ms;
}

/* Light theme: cream palette (sRGB 247,247,243 → 216,213,207). Follows system unless overridden by data-theme. */
@media (prefers-color-scheme: light) {
  :root:not([data-theme="dark"]) {
    --hush-black:        #f7f7f3;  /* 247,247,243 — page bg */
    --hush-surface:      #f2f1ed;  /* 242,241,237 — cards */
    --hush-elevated:     #e6e5e0;  /* 230,229,224 — raised */
    --hush-hover:        #d8d5cf;  /* 216,213,207 — hover */

    --hush-amber-glow:   rgba(213, 79, 18, 0.12);
    --hush-amber-ghost:  rgba(213, 79, 18, 0.06);
    --hush-on-amber:     #ffffff;

    --hush-border:       #e0ddd7;
    --hush-border-hover: #d0cdc6;
    --hush-border-focus: #c0bdb4;

    --hush-text:         #1a1a18;
    --hush-text-secondary: #5c5b56;
    --hush-text-muted:   #7a7973;
    --hush-text-ghost:   #9a9992;

    --hush-glass-bg:         rgba(230, 229, 224, 0.82);
    --hush-video-label-bg:  rgba(26, 26, 24, 0.65);
    --hush-badge-live-bg:   rgba(52, 211, 153, 0.12);
    --hush-btn-danger-hover: rgba(239, 68, 68, 0.12);
    --hush-header-block-bg:    rgba(0, 0, 0, 0.04);
    --hush-header-block-border: rgba(0, 0, 0, 0.08);
  }
}

/* Explicit theme override (for future in-app setting: system / light / dark) */
[data-theme="light"] {
  --hush-black:        #f7f7f3;
  --hush-surface:      #f2f1ed;
  --hush-elevated:     #e6e5e0;
  --hush-hover:        #d8d5cf;
  --hush-amber-glow:   rgba(213, 79, 18, 0.12);
  --hush-amber-ghost:  rgba(213, 79, 18, 0.06);
  --hush-on-amber:     #ffffff;
  --hush-border:       #e0ddd7;
  --hush-border-hover: #d0cdc6;
  --hush-border-focus: #c0bdb4;
  --hush-text:         #1a1a18;
  --hush-text-secondary: #5c5b56;
  --hush-text-muted:   #7a7973;
  --hush-text-ghost:   #9a9992;
  --hush-glass-bg:         rgba(230, 229, 224, 0.82);
  --hush-video-label-bg:  rgba(26, 26, 24, 0.65);
  --hush-badge-live-bg:   rgba(52, 211, 153, 0.12);
  --hush-btn-danger-hover: rgba(239, 68, 68, 0.12);
  --hush-header-block-bg:    rgba(0, 0, 0, 0.04);
  --hush-header-block-border: rgba(0, 0, 0, 0.08);
}

[data-theme="dark"] {
  /* Dark theme: warm palette (sRGB 19,18,10 → 60,57,53) */
  --hush-black:        #13120a;
  --hush-surface:      #1b1912;
  --hush-elevated:     #26241e;
  --hush-hover:        #3c3935;
  --hush-amber-glow:   rgba(213, 79, 18, 0.15);
  --hush-amber-ghost:  rgba(213, 79, 18, 0.08);
  --hush-on-amber:     #13120a;
  --hush-border:       #26241e;
  --hush-border-hover: #3c3935;
  --hush-border-focus: #4a4742;
  --hush-text:         #e4e4ec;
  --hush-text-secondary: #8888a0;
  --hush-text-muted:   #555568;
  --hush-text-ghost:   #3a3a4e;
  --hush-glass-bg:         rgba(19, 18, 10, 0.68);
  --hush-video-label-bg:  rgba(19, 18, 10, 0.7);
  --hush-badge-live-bg:   rgba(52, 211, 153, 0.1);
  --hush-btn-danger-hover: rgba(239, 68, 68, 0.15);
  --hush-header-block-bg:    rgba(255, 255, 255, 0.03);
  --hush-header-block-border: rgba(255, 255, 255, 0.06);
}

/* ── Reset ─────────────────────────────────────── */

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  height: 100%;
  overflow: hidden;
}

#root {
  height: 100%;
  overflow-y: auto;
}

body {
  font-family: var(--font-sans);
  background-color: var(--hush-black);
  color: var(--hush-text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  position: relative;
}

#root {
  position: relative;
  z-index: 1;
}

/* ── Glass (translucent) ───────────────────────── */

.glass {
  position: relative;
  background: var(--hush-glass-bg);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border: 1px solid transparent;
  border-radius: 0;
  overflow: hidden;
}

.glass::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  opacity: 0.045;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.20' numOctaves='3'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23g)'/%3E%3C/svg%3E");
  background-repeat: repeat;
}

/* ── Typography ────────────────────────────────── */

h1, h2, h3 {
  letter-spacing: -0.02em;
}

h1 {
  font-size: 2rem;
  font-weight: 300;
}

h2 {
  font-size: 1.4rem;
  font-weight: 300;
}

h3 {
  font-size: 1.1rem;
  font-weight: 500;
}

code, .mono {
  font-family: var(--font-mono);
  font-size: 0.85em;
}

/* ── Buttons ───────────────────────────────────── */

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 20px;
  border: none;
  border-radius: var(--radius-md);
  font-family: var(--font-sans);
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color var(--duration-fast) var(--ease-out),
    color var(--duration-fast) var(--ease-out),
    box-shadow var(--duration-fast) var(--ease-out),
    border-color var(--duration-fast) var(--ease-out),
    transform 80ms ease;
  user-select: none;
}

.btn:active {
  transform: scale(0.98);
}

.btn-primary {
  background: var(--hush-amber);
  color: var(--hush-on-amber);
}

.btn-primary:hover {
  background: var(--hush-amber-bright);
  box-shadow: 0 0 24px var(--hush-amber-glow);
}

.btn-secondary {
  background: var(--hush-surface);
  color: var(--hush-text);
  border: 1px solid transparent;
}

.btn-secondary:hover {
  background: var(--hush-elevated);
}

.btn-danger {
  background: var(--hush-danger-ghost);
  color: var(--hush-danger);
  border: 1px solid transparent;
}

.btn-danger:hover {
  background: var(--hush-btn-danger-hover);
}

.btn-icon {
  width: 44px;
  height: 44px;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-md);
  background: var(--hush-surface);
  border: 1px solid transparent;
  color: var(--hush-text-secondary);
  transition: background-color var(--duration-fast) var(--ease-out),
    color var(--duration-fast) var(--ease-out),
    border-color var(--duration-fast) var(--ease-out),
    transform 80ms ease;
}

.btn-icon:hover {
  color: var(--hush-text);
  background: var(--hush-elevated);
}

.btn-icon:active {
  transform: scale(0.98);
}

.btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none;
}

/* All interactive buttons/tabs (hover + active) */
button:not(:disabled) {
  transition: background-color var(--duration-fast) var(--ease-out),
    color var(--duration-fast) var(--ease-out),
    border-color var(--duration-fast) var(--ease-out),
    box-shadow var(--duration-fast) var(--ease-out),
    transform 80ms ease;
}

button:not(:disabled):active {
  transform: scale(0.98);
}

/* Links: same hover/active feel as buttons */
a[href] {
  transition: color var(--duration-fast) var(--ease-out), transform 80ms ease;
}

a[href]:active {
  transform: scale(0.98);
}

/* Home: auth choice buttons (Login / Register / Guest) — hover only.
   Base and hover in CSS so hover is not overridden by inline styles. */
.home-auth-choice-btn {
  flex: 1;
  padding: 10px;
  border: none;
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--hush-text-secondary);
  font-family: var(--font-sans);
  font-size: 0.85rem;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}
.home-auth-choice-btn:hover {
  background: var(--hush-hover);
  color: var(--hush-text);
}
.home-auth-choice-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}
.home-auth-choice-btn:disabled:hover {
  background: transparent;
  color: var(--hush-text-secondary);
}

/* Home: create/join room tabs — hover tonality on inactive tab */
.home-room-tabs button[data-active="false"]:hover {
  background: var(--hush-hover);
  color: var(--hush-text);
}

/* Back link/button — shared hover (Home, Roadmap-style) */
.back-link {
  background: none;
  border: none;
  color: var(--hush-text-muted);
  font-size: 0.8rem;
  font-family: var(--font-sans);
  cursor: pointer;
  padding: 0;
  margin-bottom: 16px;
  transition: color var(--duration-fast) var(--ease-out);
}
.back-link:hover {
  color: var(--hush-amber);
}

/* ── Inputs ────────────────────────────────────── */

.input {
  width: 100%;
  padding: 11px 14px;
  background: var(--hush-black);
  border: 1px solid transparent;
  border-radius: var(--radius-md);
  color: var(--hush-text);
  font-family: var(--font-sans);
  font-size: 0.9rem;
  outline: none;
  transition: border-color var(--duration-fast) var(--ease-out),
    box-shadow var(--duration-fast) var(--ease-out);
}

.input:focus {
  border-color: var(--hush-amber-ghost);
  box-shadow: 0 0 0 1px var(--hush-amber-ghost);
}

.input::placeholder {
  color: var(--hush-text-ghost);
}

/* ── Toggle switch ── */

.toggle-switch {
  width: 36px;
  height: 20px;
  margin: 0;
  appearance: none;
  background: var(--hush-elevated);
  border: 1px solid var(--hush-elevated);
  border-radius: 0;
  cursor: pointer;
  position: relative;
  transition: background var(--duration-fast) var(--ease-out);
  flex-shrink: 0;
}

.toggle-switch:hover:not(:disabled) {
  background: var(--hush-hover);
  border-color: var(--hush-hover);
}

.toggle-switch:checked {
  background: var(--hush-amber-dim);
  border-color: var(--hush-amber-dim);
}

.toggle-switch::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  width: 14px;
  height: 14px;
  background: var(--hush-text-secondary);
  transition: transform var(--duration-fast) var(--ease-out);
}

.toggle-switch:checked::after {
  transform: translateX(16px);
  background: var(--hush-amber);
}

.toggle-switch:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Light mode: toggle track more visible (override base after cascade) */
@media (prefers-color-scheme: light) {
  :root:not([data-theme="dark"]) .toggle-switch {
    background: #c8c5be;
    border-color: #c8c5be;
  }
  :root:not([data-theme="dark"]) .toggle-switch:hover:not(:disabled) {
    background: #b8b5ac;
    border-color: #b8b5ac;
  }
  :root:not([data-theme="dark"]) .toggle-switch:disabled {
    opacity: 0.9;
  }
}
[data-theme="light"] .toggle-switch {
  background: #c8c5be;
  border: 1px solid #c8c5be;
}
[data-theme="light"] .toggle-switch:hover:not(:disabled) {
  background: #b8b5ac;
  border-color: #b8b5ac;
}
[data-theme="light"] .toggle-switch:disabled {
  opacity: 0.9;
}

/* ── Cards ─────────────────────────────────────── */

.card {
  background: var(--hush-surface);
  border: 1px solid transparent;
  border-radius: var(--radius-lg);
  padding: 20px;
}


/* ── Status indicators ─────────────────────────── */

.live-dot {
  width: 7px;
  height: 7px;
  background: var(--hush-live);
  border-radius: 50%;
  box-shadow: 0 0 8px var(--hush-live-glow);
  animation: hush-pulse 2.5s ease-in-out infinite;
}

@keyframes hush-pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.4; transform: scale(0.85); }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 3px 10px;
  border-radius: var(--radius-full);
  font-size: 0.7rem;
  font-weight: 500;
  letter-spacing: 0.06em;
  text-transform: uppercase;
}

.badge-live {
  background: var(--hush-badge-live-bg);
  color: var(--hush-live);
  border: 1px solid transparent;
}

/* ── Layout utilities ──────────────────────────── */

.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.gap-sm { gap: 8px; }
.gap-md { gap: 16px; }
.gap-lg { gap: 24px; }

/* ── Prevent iOS Safari auto-zoom on input focus ── */
/* iOS zooms the viewport when an input's font-size < 16px; the zoom
   persists across SPA navigation and makes the room UI look zoomed in. */
@supports (-webkit-touch-callout: none) {
  input, textarea, select {
    font-size: 16px;
  }
}

/* ── Scrollbar ─────────────────────────────────── */

::-webkit-scrollbar {
  width: 5px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--hush-border-hover);
  border-radius: 0;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--hush-border-focus);
}

/* ── Video containers ──────────────────────────── */

.video-container {
  position: relative;
  background: var(--hush-elevated);
  border-radius: var(--radius-md);
  overflow: hidden;
  /* NO border — video containers are windows, not cards */
}

.video-container video {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}

.video-label {
  position: absolute;
  bottom: 10px;
  left: 10px;
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 5px 12px;
  background: var(--hush-video-label-bg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-radius: var(--radius-sm);
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--hush-text);
}

/* ── Toasts / notifications ────────────────────── */

.toast {
  position: fixed;
  top: 16px;
  right: 16px;
  padding: 12px 20px;
  background: var(--hush-elevated);
  border: 1px solid transparent;
  border-radius: var(--radius-md);
  font-size: 0.85rem;
  z-index: 1000;
  animation: slide-in-right var(--duration-normal) var(--ease-out);
}

@keyframes slide-in-right {
  from {
    opacity: 0;
    transform: translateX(16px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* ── Sidebar / Panel (slide + overlay, transition only) ─── */

.sidebar-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 49;
  opacity: 0;
  pointer-events: none;
  /* visibility delays until after opacity fade-out, forcing a full repaint
     on iOS Safari which otherwise leaves stale dim artifacts on screen */
  visibility: hidden;
  transition: opacity 280ms var(--ease-out), visibility 0s linear 280ms;
}

.sidebar-overlay.sidebar-overlay-open {
  opacity: 1;
  pointer-events: auto;
  visibility: visible;
  transition: opacity 280ms var(--ease-out), visibility 0s linear 0s;
}

.sidebar-panel-right {
  position: fixed;
  top: 48px;
  right: 0;
  bottom: 0;
  width: 280px;
  z-index: 50;
  background: var(--hush-surface);
  display: flex;
  flex-direction: column;
  overflow: auto;
  padding: 16px;
  box-shadow: -4px 0 24px rgba(0, 0, 0, 0.4);
  transform: translateX(100%);
  transition: transform 400ms var(--ease-out);
}

.sidebar-panel-right.sidebar-panel-open {
  transform: translateX(0);
}

.sidebar-panel-right:not(.sidebar-panel-open) {
  pointer-events: none;
}

/* ── Sidebar desktop (in-flow column, slide via width + transform) ─── */

.sidebar-desktop {
  width: 0;
  min-width: 0;
  overflow: hidden;
  flex-shrink: 0;
  align-self: stretch;
  transition: width 400ms var(--ease-out);
}

.sidebar-desktop.sidebar-desktop-open {
  width: 260px;
}

.sidebar-desktop-inner {
  width: 260px;
  min-width: 260px;
  height: 100%;
  min-height: 100%;
  flex-shrink: 0;
  transform: translateX(100%);
  transition: transform 400ms var(--ease-out);
}

.sidebar-desktop.sidebar-desktop-open .sidebar-desktop-inner {
  transform: translateX(0);
}

/* ── Modal (transition only, no keyframes) ───────────────── */

.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  opacity: 0;
  transition: opacity var(--duration-normal) var(--ease-out);
}

.modal-backdrop.modal-backdrop-open {
  opacity: 1;
}

.modal-content {
  background: var(--hush-surface);
  border: 1px solid transparent;
  border-radius: var(--radius-xl);
  padding: 28px;
  width: 380px;
  max-width: 90vw;
  max-height: 70vh;
  display: flex;
  flex-direction: column;
  gap: 12px;
  opacity: 0;
  transform: scale(0.97);
  transition: opacity var(--duration-normal) var(--ease-out),
    transform var(--duration-normal) var(--ease-out);
}

.modal-content.modal-content-open {
  opacity: 1;
  transform: scale(1);
}

/* ── Typewriter cursor ────────────────────── */
.typewriter-cursor {
  display: inline-block;
  width: 1.5px;
  height: 0.85em;
  background: var(--hush-amber);
  margin-left: 1px;
  vertical-align: text-bottom;
  animation: cursor-blink 1.1s step-end infinite;
}

@keyframes cursor-blink {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0; }
}
