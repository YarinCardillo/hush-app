# =============================================================================
# HUSH — Environment Variables
# Copy to .env for local dev. For production, set these in your hosting platform.
# NEVER commit .env or .env.production to git.
# =============================================================================
#
# For LOCAL DEV: cp .env.example .env
# For PRODUCTION: set these as environment variables in your hosting platform,
#                 or use .env.production (which is gitignored).
# Do NOT use example/default secrets in production (see SECURITY.md Production checklist).

# --- LiveKit -------------------------------------------------------------------
# Dev: use fake values (must match what's in docker-compose.yml livekit service)
# Production (gethush.live): use LiveKit Cloud keys from https://cloud.livekit.io
LIVEKIT_API_KEY=devkey
LIVEKIT_API_SECRET=devsecret
# Dev: ws://localhost:7880
# Production (LiveKit Cloud): wss://<your-project>.livekit.cloud
LIVEKIT_URL=ws://localhost:7880

# --- Matrix / Synapse ----------------------------------------------------------
# MATRIX_HOMESERVER_URL: used by the Hush server (in Docker) to call Synapse whoami
#   and for delete-if-empty (Synapse Admin API). In Docker: http://synapse:8008.
# MATRIX_SERVER_NAME: server name (e.g. localhost or your domain).
# MATRIX_HOMESERVER_URL=http://synapse:8008
MATRIX_SERVER_NAME=localhost

# SYNAPSE_ADMIN_TOKEN: Synapse admin access token. Required for deleting empty rooms
#   when the last participant leaves. Create an admin user in Synapse and get a token
#   (e.g. login as that user, copy access_token from the response). If unset, rooms
#   are not deleted when empty (they will accumulate).
# SYNAPSE_ADMIN_TOKEN=

# --- Synapse internals ---------------------------------------------------------
# Generate with: openssl rand -hex 32
SYNAPSE_REGISTRATION_SHARED_SECRET=changeme
SYNAPSE_MACAROON_SECRET_KEY=changeme

# --- Postgres (Synapse database) -----------------------------------------------
POSTGRES_DB=synapse
POSTGRES_USER=synapse
POSTGRES_PASSWORD=changeme

# --- Node server ---------------------------------------------------------------
PORT=3001
NODE_ENV=development

# CORS_ORIGIN: allowed origin for API/Matrix CORS. In production set to your frontend origin
#   (e.g. https://gethush.live). For local dev, * or leave unset (defaults to * in docker-compose).
# CORS_ORIGIN=https://gethush.live

# --- Room limits (server-side) ------------------------------------------------
# MAX_GUEST_ROOMS: max concurrent guest rooms on the server (create blocked when at limit).
# GUEST_ROOM_MAX_DURATION_MS: max lifetime of a guest room in ms (default 3h); room is destroyed after.
# MAX_PARTICIPANTS_PER_ROOM: max participants per room; token request returns 403 when room is full.
MAX_GUEST_ROOMS=30
GUEST_ROOM_MAX_DURATION_MS=10800000
MAX_PARTICIPANTS_PER_ROOM=10

# --- Hosted-only (gethush.live) — NOT used when self-hosting ------------------
# Guest session limits. Ignored in self-hosted mode.
GUEST_SESSION_MINUTES=60
MAX_GUEST_SESSIONS=20
